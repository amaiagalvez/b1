var footerTotal="",height_content=document.body.offsetHeight/2;height_content>550&&(height_content=550),height_content+="px";var handleCheckboxes=function(t,e,a,o){var s=$(o),n=s.find(":checked");return n.length?1===n.val()?"Yes":"No":s.text()};function initRoleDataTables(t,e,a,o,s){window.dtOptions=window.dtDefaultOptions;let n=window.location.search,i="",d="title_"+e,l="notes_"+e;window.dtOptions.columns=[{title:"",data:"actions",name:"actions",orderable:!1,searchable:!1,width:"10%"},{title:roleWords.rola,data:d,name:d},{title:roleWords.short_name,data:"name",name:"name"},{title:basWords.notes,data:l,name:l,width:"20%"}],"index"===t&&(i=a+n),"trash"===t&&(i=s+n,window.dtOptions.columns.push({title:basWords.when,data:"deleted_at",name:"deleted_at"},{title:basWords.who,data:"deletedBy.data.name",name:"deletedBy.name",orderable:!1,searchable:!1})),"nonactive"===t&&(i=o+n,window.dtOptions.columns.push({title:basWords.when,data:"updated_at",name:"updated_at"},{title:basWords.who,data:"updatedBy.data.name",name:"updatedBy.name",orderable:!1,searchable:!1})),window.dtOptions.language=e,window.dtOptions.oLanguage.sUrl="/basics/js/dt_"+e+".json",window.dtOptions.serverSide=!0,window.dtOptions.order=[1,"asc"],window.dtOptions.ajax=i,$("#dt_ajx").DataTable(window.dtOptions)}function initSessionDataTables(t,e,a){window.dtOptions=window.dtDefaultOptions;let o=window.location.search,s="";window.dtOptions.columns=[{title:"",data:"actions",name:"actions",orderable:!1,searchable:!1,width:"1%"},{title:sessionWords.user,data:"user.data.name",name:"user.name"},{title:sessionWords.login_at,data:"login_at",name:"login_at"},{title:sessionWords.logout_at,data:"logout_at",name:"logout_at"},{title:sessionWords.total,data:"total",name:"total",orderable:!0,searchable:!1},{title:sessionWords.ip_address,data:"ip_address",name:"ip_address"},{title:sessionWords.user_agent,data:"user_agent",name:"user_agent",width:"20%"}],"index"===t&&(s=a+o),window.dtOptions.language=e,window.dtOptions.oLanguage.sUrl="/basics/js/dt_"+e+".json",window.dtOptions.serverSide=!0,window.dtOptions.order=[2,"desc"],window.dtOptions.ajax=s,$("#dt_ajx").DataTable(window.dtOptions)}function initUserDataTables(t,e,a,o,s){window.dtOptions=window.dtDefaultOptions;let n=window.location.search,i="";window.dtOptions.columns=[{title:"",data:"actions",name:"actions",orderable:!1,searchable:!1,width:"10%"},{title:userWords.name,data:"name",name:"name"},{title:userWords.email,data:"email",name:"email"},{title:basWords.lang,data:"lang",name:"lang",className:"text-center"},{title:userWords.role_name,data:"role_name",name:"role_name",className:"text-center"},{title:userWords.sessions_count,data:"sessions_count",name:"sessions_count",searchable:!1,className:"text-center"},{title:basWords.notes,data:"notes",name:"notes",width:"20%"}],"index"===t&&(i=a+n),"trash"===t&&(i=o+n,window.dtOptions.columns.push({title:basWords.when,data:"deleted_at",name:"deleted_at"},{title:basWords.who,data:"deletedBy.data.name",name:"deletedBy.name",orderable:!1,searchable:!1})),"nonactive"===t&&(i=s+n,window.dtOptions.columns.push({title:basWords.when,data:"updated_at",name:"updated_at"},{title:basWords.who,data:"updatedBy.data.name",name:"updatedBy.name",orderable:!1,searchable:!1})),window.dtOptions.language=e,window.dtOptions.oLanguage.sUrl="/basics/js/dt_"+e+".json",window.dtOptions.serverSide=!0,window.dtOptions.order=[1,"asc"],window.dtOptions.ajax=i,$("#dt_ajx").DataTable(window.dtOptions)}function initVariableDataTables(t,e,a){window.dtOptions=window.dtDefaultOptions;let o=window.location.search,s="",n="title_"+e,i="notes_"+e;window.dtOptions.columns=[{title:"",data:"actions",name:"actions",orderable:!1,searchable:!1,width:"10%"},{title:variableWords.variable,data:n,name:n,width:"20%"},{title:variableWords.value,data:"value",name:"value",className:"text-center"},{title:basWords.notes,data:i,name:i,width:"20%"},{title:basWords.order,data:"order",name:"order",visible:!1}],"index"===t&&(s=a+o),window.dtOptions.language=e,window.dtOptions.oLanguage.sUrl="/basics/js/dt_"+e+".json",window.dtOptions.serverSide=!0,window.dtOptions.order=[4,"asc"],window.dtOptions.ajax=s,$("#dt_ajx").DataTable(window.dtOptions)}window.dtDefaultOptions={oLanguage:{sUrl:"/js/dt_translations_eu.js"},scrollX:!0,scrollY:height_content,scrollCollapse:!0,retrieve:!0,processing:!0,deferRender:!0,dom:'<<"top"fr><t><"bottom"Blip>>',responsive:!0,aaSorting:[],select:!0,stateSave:!0,iDisplayLength:10,pageLength:10,aLengthMenu:[[10,20,25,50,100,-1],[10,20,25,50,100,"All"]],pagingType:"full_numbers",footerCallback:function(t,e,a,o,s){var n=this.api(),i=function(t){return"string"==typeof t?1*t.replace(/[\â‚¬.]/g,"").replace(",","."):"number"==typeof t?t:0};if(""!=footerTotal)for(var d=(footerTotal+="").split(","),l=0;l<d.length;l++)columnNb=d[l],total=n.column(columnNb).data().reduce(function(t,e){return i(t)+i(e)},0),showTotal=n.column(columnNb,{page:"current"}).data().reduce(function(t,e){return i(t)+i(e)},0),showTotal=Number(showTotal).toFixed(2),dezimalak=showTotal.split("."),0==dezimalak[1]&&(showTotal=dezimalak[0]),totala=Number(total).toFixed(2),dezimalak=totala.split("."),0==dezimalak[1]&&(totala=dezimalak[0]),$(n.column(columnNb).footer()).html('<span class="theme-color">'+formatuakZbkia(showTotal)+" ("+formatuakZbkia(totala)+")</span>")},buttons:[{extend:"colvis",autoClose:!0,postfixButtons:["colvisRestore"],text:'<i class="fas fa-columns" aria-hidden="true"></i> Zutabeak',collectionLayout:"two-column",columns:":not(:first-child):not(:last-child)"},{extend:"csv",text:'<i class="fas fa-file-csv" aria-hidden="true"></i> CSV ',charset:"utf-8",bom:!0,exportOptions:{columns:":visible",modifier:{order:"applied",page:"all",search:"applied"}}}]},$(".datatable").each(function(){$(this).hasClass("dt-select")&&(window.dtDefaultOptions.select={style:"multi",selector:"td:first-child"},window.dtDefaultOptions.columnDefs.push({orderable:!1,className:"select-checkbox",targets:0}))}),void 0!==window.route_mass_crud_entries_destroy&&$(".datatable, .ajaxTable").siblings(".actions").html('<a href="'+window.route_mass_crud_entries_destroy+'" class="btn btn-xs btn-danger js-delete-selected" style="margin-top:0.755em;margin-left: 20px;">Delete selected</a>'),$(document).on("click",".js-delete-selected",function(){if(confirm("Are you sure")){var t=[];$(this).closest(".actions").siblings(".datatable, .ajaxTable").find("tbody tr.selected").each(function(){console.log("selected",$(this).data("entry-id")),t.push($(this).data("entry-id"))}),$.ajax({method:"POST",url:$(this).attr("href")+"/?ids="+t}).done(function(){location.reload()})}return!1}),$(document).on("click","#select-all",function(){var t=$(this).is(":checked");$(this).closest("table.datatable, table.ajaxTable").find("td:first-child").each(function(){t!=$(this).closest("tr").hasClass("selected")&&$(this).click()})}),$(".mass").click(function(){$(this).is(":checked")?$(".single").each(function(){0==$(this).is(":checked")&&$(this).click()}):$(".single").each(function(){1==$(this).is(":checked")&&$(this).click()})});
